<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Tic Tac Toe</title>
<!--
Author: Hyoeun Lee
Date created: 17th May, 2017
Date updated: 21st May, 2017
Version: 0.2
Copyright: 
	This work is the intellectual property of Sheridan College. 
	Any further copying and distribution outside of class must be within 
	the copyright law. Posting to commercial sites for profit is prohibited.
Purpose: 
	Develop and publish a website for members to play a variety of games that adhere to the given specifications.
	Assignment 1, SYST10199 Web Programming, Sheridan College, Spring/Summer 2017	
Description:
	This assignment consists of the home page and five content pages using HTML5 and CSS3. 
	All pages share the same page header, footer, main navigation, and games sub-navigation and contain 
	specified main content. The external css file is organized as a framework for the entire site. 
	The only external add-in is font awesome.
	Do not make any assumptions without validating them. You can ask in classroom or using the discussion board.
	Make sure all code is well documented and validated. Strive to keep your code as short as possible and 
	maintainable. Consider how you organize it.
	Use the standard site organization. the project directory name is assign1.
	
	A two-player game. 
	The players are presented with a board of three-by-three table and a reset button.
	The reset button starts a game where players take turns selecting one of the nine
	available empty cells with the goal of completing a row, a column, or a diagonal to
	win the game.	
-->

<!-- 
	from instructions...
	Use font-family: Teko for the document and the default text color is white. You will need to include 
	@import url(https://fonts.googleapis.com/css?family=Teko:400,600); appropriately. 
	The background color is black and it is covered by one of the background images as illustrated below, 
	does not repeat. URL's will be provided by the instructor. 
-->	
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Teko" rel="stylesheet">
<link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">	

<style>
/* CSS rules unique to tictacToe.html page */
main {
	text-align: center;
		width: 100%;
}

table {
	margin: 25px auto;
	padding: 18px;
	background-color: white;
	color: navy;
	font-family: Helvetica,Arial,"Lucida Grande",sans-serif;
}
td {
	height: 70px;
	width: 70px;
	color: navy;
	font-size: 3.2em;
	font-family: sans-serif;
	border: 1px solid #00f;
	background-color: transparent;
}
td:nth-child(1) {
	border-left-style: none;
}

td:nth-child(3) {
	border-right-style: none;
}

tr:nth-child(1)>td {
	border-top-style: none;
}

tr:nth-child(3)>td {
	border-bottom-style: none;
}

@media all and ( max-device-width: 500px ) and ( max-width: 500px ){
	table {
		width: 100%;
		margin: 25px auto;
		padding: 18px;
		background-color: white;
		color: GREEN;
		font-family: Helvetica,Arial,"Lucida Grande",sans-serif;
	}
	header {
		display: none;
	}
	h3 {		
		font-size: 2em; 
		margin:0; 
		padding:0;
	}
}

/* navigation dropdown */
.dropdown {
	display: inline-block;
    position: relative; 
}
.dropdown-content {
    background-color: black;
    box-shadow: 0px 3px 5px 0px rgba(200,200,200,0.2);
	display: none;
	min-width: 120px;
    padding: 2px;
	position: absolute;
}
.dropdown:hover .dropdown-content {
    display: block;
}
.dropdown-content a {
	display: inline-block;
	width: 80%;
}
nav { 
  background: orange;
  display: flex;
  justify-content: flex-end;
  margin: 0 0 15px 0;
}

nav a {
  text-decoration: none;
  display: block;
  padding: 1em;
  color: white;
}

nav a:hover {
  background: #ff7700;
}

nav a.active {
  background: darkorange;
}

/* mid-size devices such as a tablet */
@media all and (max-width: 900px) {
    nav {
        justify-content: space-around;
    }
}

/* small devices such as a phone */
@media all and (max-width: 200px) {
    nav {
        flex-flow: column wrap;
        padding: 0;
    }
    nav a { 
        text-align: center; 
        padding: 10px;
        border-top: 2px solid rgba(255,255,255,0.3); 
        border-bottom: 2px solid rgba(0,0,0,0.1); 
    }
    nav:last-of-type a {
        border-bottom: none;
    }
} 	
	</style>
</head>

<body>
	<!-- Use font-family: Teko for the document and the default text color is white. You will need to include 
	@import url(https://fonts.googleapis.com/css?family=Teko:400,600); appropriately. 
	The background color is black and it is covered by one of the background images as illustrated below, does not repeat. 
	URL's will be provided by the instructor. 
	-->
	<header>

	</header>
	<!--
		Style a three-by-three table to look as illustrated. The cells have dimensions of 50px. 
		You should be able to do the entire table with six CSS rules: one for table selector, 
		one for td selector, and four for the appropriate pseudo-selectors.	
	-->
	<main>
		<h3>Tic Tac Toe</h3>
		<p id="message"> Message </p>
		<p id="message2"> Message2 </p>
		<table>
			<tr>
				<td id="cell1"> </td>
				<td id="cell2"> </td>
				<td id="cell3"> </td>
			</tr>
			<tr>
				<td id="cell4"> </td>
				<td id="cell5"> </td>
				<td id="cell6"> </td>
			</tr>
			<tr>
				<td id="cell7"> </td>
				<td id="cell8"> </td>
				<td id="cell9"> </td>
			</tr>        
		</table>
		<p><button id="start" onclick='resetGame()'>Start A Game</button></p>		
	</main>
	<!-- <footer> element centered on its own line; it is followed by a paragraph containing "username @ SYST10199 Web Programming, Sheridan College"; 
	don't forget to substitute your name for username; it is also centered. the footer spans the entire page and it is fixed to the bottom of the browser window. 
	The background color is black with half-transparency (you may need to play with the transparency based on the background image with the objective in mind, 
	that you want the image to show through, but the text should be easily readable; 
	if the image has a lot of light colour at the bottom, consider making the footer more opaque.)
	-->
	<footer> 
		<address>Hyoeun Lee, SYST10199	Web Programming &copy; Sheridan College</address>
	</footer>
<script>
	//player is a human that is identified by token x or o
	var player = 'X';
	
	//There are 9 empty cells to start with 
	var empty = 9;
	
	//gameover is false if the game is in progress. 
	var gameOver = false;
	
	//winning combos are 3 rows, 3 columns, 2 diagonals
	var winCombo = [[1,2,3],[4,5,6],[7,8,9],
					[1,4,7],[2,5,8],[3,6,9],
					[1,5,9],[3,5,7]
	];
	
	//board is a collection of 9 cells
	var board = document.getElementsByTagName("td");
	
	/* 
	 function setMessage() is called to display message whose turn it is and who has won
	*/
	function setMessage(msg) {
		document.getElementById("message").innerHTML = msg;
		document.getElementById("message").style.color = 'navy';
		document.getElementById("message").style.fontSize = '18px';
	}
	
	/*
		function setMessage() is called to display message if the game is in progress or over.
	*/
	function setMessage2(msg) {
		document.getElementById("message2").innerHTML = msg;
		document.getElementById("message2").style.color = 'blue';
		document.getElementById("message2").style.fontSize = '16px';
	}
	
	/* 
		function cellClick() is called when a player clicks a cellClick
	*/
	function cellClick(cell) {
	
		//check if there is a winner
		//decrease the number of cells to click
		if (!gameOver && cell.innerHTML == " ") {
			cell.innerHTML = player;
			cleanBgColor();
			cell.style.backgroundColor = 'lightBlue';
			if (player == "X") {
				player = "O";
				setMessage("It's " + player +"'s turn");
			}else{
				player = "X";
				setMessage("It's " + player +"'s turn");
			}empty--;
			checkWinner();
		}
		else {
			setMessage("Wrong move");
		}
	}
	
	/*
		function checkWinner() checks all possible winning combinations
	*/
	function checkWinner() {
		//check rows, cols, diags
		//if empty is 9, then we declare draw and end the game
		//FIXME: checking winning cases needs to be more concise.
		
		/* 
		 * modified based on 
		 * http://bajcar.dev.fast.sheridanc.on.ca/web10199/content/code/tictactoe_17.s.1/tictactoe_17s1.html
		 */
		 
		//check rows, and if it meets a winning case, turn its font color to red.
		for(var i=0; i<9; i+=3) {
			if(board[i].innerHTML != " " &&
				board[i].innerHTML == board[i+1].innerHTML &&
				board[i].innerHTML == board[i+2].innerHTML) {
				board[i].style.color = "red";
				board[i+1].style.color = "red";
				board[i+2].style.color = "red";
				cleanBgColor();
				document.getElementById("message").innerHTML = board[i].innerHTML + " wins";
				endGame();
				return;
			}
		}
		
		//check columns, and if it meets a winning case, turn its font color to red.
		for(var i=0; i<3; i++) {
			if(board[i].innerHTML != " " &&
				board[i].innerHTML == board[i+3].innerHTML &&
				board[i].innerHTML == board[i+6].innerHTML){
				board[i].style.color = 'red';
				board[i+3].style.color = 'red';
				board[i+6].style.color = 'red';
				cleanBgColor();
				document.getElementById("message").innerHTML = board[i].innerHTML + " wins";
				endGame();
				return;
			}
		}
		
		//check diagonally, and if it meets a winning case, turn the font color to red.
		if(board[0].innerHTML != " " &&
			board[0].innerHTML == board[4].innerHTML &&
			board[4].innerHTML == board[8].innerHTML) {
			board[0].style.color = 'red';
			board[4].style.color = 'red';
			board[8].style.color = 'red';
			cleanBgColor();
			document.getElementById("message").innerHTML = board[0].innerHTML + " wins";
			endGame();
			return;
		}
		
		//check diagonally, and if it meets a winning case, turn the font color to red.
		if(board[2].innerHTML != " " &&
			board[2].innerHTML == board[4].innerHTML &&
			board[4].innerHTML == board[6].innerHTML) {
			board[2].style.color = 'red';
			board[4].style.color = 'red';
			board[6].style.color = 'red';
			cleanBgColor();
			document.getElementById("message").innerHTML = board[2].innerHTML + " wins";
			endGame();
			return;
		}
		
		//check if the game is a draw 
		if (empty == 0) {
			document.getElementById("message").innerHTML = "It's a draw.";
			endGame();
		}
	}
	
	/*
		function cleanBgColor() is called to get rid of the background-color
	*/
	function cleanBgColor() {
		for(var j=0; j<board.length; j++) {
			board[j].style.backgroundColor = 'transparent';
		}
	}
	
	/* 
		function endGame() is called to show the game is over
	*/
	function endGame() {
		gameOver = true;
		setMessage2("Game Over");
	}

	/*
		function resetGame() resets the game
	*/
	function resetGame() {
	
		for(var i=0; i<board.length; i++) {
			board[i].innerHTML = " ";
			board[i].style.color = 'navy';
			board[i].style.backgroundColor = 'transparent';
		}
		gameOver = false;
		empty = 9;
		setMessage(player + " gets to start.");
		setMessage2("Go!");
		console.log("visited resetGame");
	}

	//listener for the button with id="start"
	document.getElementById("start").addEventListener("click", resetGame());
	
	//listeners for the nine td objects
	for(var i=0; i < board.length; i++){
		board[i].addEventListener("click", 
			function() {
			console.log("clicked");
				cellClick(this);
			}
		);
	}
</script>
</body>
</html>